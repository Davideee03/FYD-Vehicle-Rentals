<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Elimina Sede</title>
    <link rel="stylesheet" href="/css/style.css?v=1">
</head>
<body>

    <h1 class="page-title">Elimina Sede</h1>

    <form th:action="@{/administrator/confirmDeleteSite}" method="post" class="form-container">
        <div class="form-group">
            <label for="siteToDeleteId">Seleziona sede da eliminare:</label>
            <select name="siteToDeleteId" id="siteToDeleteId" required onchange="filterNewSiteOptions()">
                <option th:each="site : ${sites}" th:value="${site.id}" th:text="${site.name}">Sede</option>
            </select>
        </div>

        <div class="form-group">
            <label for="newSiteId">Riassegna veicoli e noleggi a:</label>
            <select name="newSiteId" id="newSiteId" required>
                <option th:each="site : ${sites}" th:value="${site.id}" th:text="${site.name}">Sede</option>
            </select>
        </div>

        <button type="submit">Conferma Eliminazione</button>
    </form>

    <script>
        function filterNewSiteOptions() {
            const toDeleteId = document.getElementById('siteToDeleteId').value;
            const newSiteSelect = document.getElementById('newSiteId');

            for (const option of newSiteSelect.options) {
                option.style.display = (option.value === toDeleteId) ? 'none' : 'block';
            }
        }

        window.addEventListener('DOMContentLoaded', filterNewSiteOptions);
    </script>

</body>
</html>
